<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script type="text/javascript" src="libs/vue.js"></script>
    <script type="module" src="js/game.js" defer></script>
    <title>Postal Idle</title>
  </head>
  <body>
    <div id="app" class="container">
      <transition name="fade">
        <img v-show="phase > 0" src="assets/bgs/1.png" class="background">
      </transition>
      <div class="row main-stat">
        ${{ this.round(money) }}
      </div>
      <div class="row stats">
        <div class="column stat">
          <div class="stat-value">{{ letters }}</div>
          <div class="stat-name">letters</div>
        </div>
        <div class="column stat">
          <div class="stat-value">{{ lettersDelivered }}</div>
          <div class="stat-name">letters delivered</div>
        </div>
        <div class="column stat">
          <div class="stat-value">{{ lettersPerSecond }}</div>
          <div class="stat-name">letters per second</div>
        </div>
      </div>
      <div class="row stats">
        <div class="column stat" v-show="phase >= 1">
          <div class="stat-value">{{ mailmen }}</div>
          <div class="stat-name">mailmen</div>
        </div>
        <div class="column stat" v-show="phase >= 2">
          <div class="stat-value">{{ recruiters }}</div>
          <div class="stat-name">recruiters</div>
        </div>
        <div class="column stat" v-show="phase >= 2">
          <div class="stat-value">{{ factories }}</div>
          <div class="stat-name">factories</div>
        </div> 
        <div class="column stat" v-show="phase >= 1">
          <div class="stat-value">{{ mailboxes }}</div>
          <div class="stat-name">mailboxes</div>
        </div>
      </div>
      <div class="buttons">
        <div class="row">
          <div class="column">
            <div class="button" @click="deliverLetter(1)">
              Deliver Letter
            </div>
          </div>
        </div>
        <div class="row" v-show="phase > 0">
          <div class="column">
            <div class="button" @click="buyMailman()">
              <div class="button-name">
                <div>Mailman</div>
                <div>(${{ mailmanPrice }})</div>
              </div>
              <div class="button-description">
                Automate letter delivery
              </div>
              <div class="buy-max" @click="buyMax(buyMailman)">
                (buy max)
              </div>
            </div>
          </div>
          <div class="column">
            <div class="button" @click="buyMailbox()">
              <div class="button-name">
                <div>Mailbox</div>
                <div>(${{ mailboxPrice }})</div>
              </div>
              <div class="button-description">
                Increase letters per second
              </div>
              <div class="buy-max" @click="buyMax(buyMailbox)">
                (buy max)
              </div> 
            </div>
          </div>
        </div>
        <div class="row" v-show="phase > 1">
          <div class="button column" @click="buyRecruiter()">
            <div class="button-name">
              <div>Recruiter</div>
              <div>(${{ recruiterPrice }})</div>
            </div>
            <div class="button-description">
              Automatically hire mailmen
            </div>
            <div class="buy-max" @click="buyMax(buyRecruiter)">
              (buy max)
            </div>
          </div>
          <div class="button column" @click="buyFactory()">
            <div class="button-name">
              <div>Factory</div>
              <div>(${{ factoryPrice }})</div>
            </div>
            <div class="button-description">
              Automatically build mailboxes
            </div>
            <div class="buy-max" @click="buyMax(buyFactory)">
              (buy max)
            </div>
          </div>
        </div>
      </div>
      <div class="milestone">
        <div class="row">
          <div class="column" v-if="this.nextPhaseAvailable">
            <div class="button" @click="prestige()">
              <div class="button-name">
                Enter Phase {{ this.phase + 1 }}
              </div>
              <div class="button-description">
                This will erase all your progress.
              </div>
            </div>
          </div>
          <div v-else class="column">
            Next milestone at {{ this.nextPhaseAt }} letters delivered
          </div>
        </div>
      </div>
      <div class="footer">
        <div class="row">
          <div class="column footer-link">
            <a @click="newGame()">new game</a>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
