<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script type="text/javascript" src="libs/vue.js"></script>
    <script type="module" src="js/game.js" defer></script>
    <title>Postal Idle</title>
  </head>
  <body>
    <div id="app" class="container">
      <div class="top-links">
        <div class="row">
          <div class="column footer-link align-right">
            <a @click="newGame()">new game</a>
          </div>
        </div>
      </div>
      <transition name="fade">
        <img v-show="phase == 1" src="assets/bgs/1.png" class="background bg1">
      </transition>
      <transition name="fade">
        <img v-show="phase == 2" src="assets/bgs/2.png" class="background bg2">
      </transition>
      <transition name="fade">
        <img v-show="phase > 2" src="assets/bgs/3.png" class="background bg3">
      </transition>
      <div class="row main-stat">
        ${{ format(this.round(money)) }}
      </div>
      <div class="row stats">
        <div class="column stat">
          <div class="stat-value">{{ format(letters) }}</div>
          <div class="stat-name">letters</div>
        </div>
        <div class="column stat">
          <div class="stat-value">{{ format(lettersDelivered) }}</div>
          <div class="stat-name">letters delivered</div>
        </div>
        <div class="column stat">
          <div class="stat-value">{{ format(lettersPerSecond) }}</div>
          <div class="stat-name">letters per second</div>
        </div>
      </div>
      <div class="row stats">
        <div class="column stat" v-show="phase >= 1">
          <div class="stat-value">{{ format(mailmen) }}</div>
          <div class="stat-name">mailmen</div>
        </div>
        <div class="column stat" v-show="phase >= 2">
          <div class="stat-value">{{ format(recruiters) }}</div>
          <div class="stat-name">recruiters</div>
        </div>
        <div class="column stat" v-show="phase >= 2">
          <div class="stat-value">{{ format(factories) }}</div>
          <div class="stat-name">factories</div>
        </div> 
        <div class="column stat" v-show="phase >= 1">
          <div class="stat-value">{{ format(mailboxes) }}</div>
          <div class="stat-name">mailboxes</div>
        </div>
        <div class="column stat" v-show="phase >= 3">
          <div class="stat-value">{{ format(segways) }}</div>
          <div class="stat-name">segways</div>
        </div>
      </div>
      <div class="milestone">
        <div class="row">
          <div class="column" v-if="this.nextPhaseAvailable">
            <div class="button" @click="prestige()">
              <div class="button-name">
                Enter Phase {{ this.phase + 1 }}
              </div>
              <div class="button-description">
                This will erase all your progress and give you a 
                x{{ 2 ** (this.phase) }} multiplier.
              </div>
            </div>
          </div>
          <div v-else class="column">
            Next milestone at {{ format(this.nextPhaseAt) }} letters delivered
          </div>
        </div>
      </div>
      <div class="buttons">
        <div class="row">
          <div class="column">
            <div class="button" @click="deliverLetter(1)">
              Deliver Letter
            </div>
          </div>
        </div>
        <div class="row" v-show="phase > 0">
          <div class="column">
            <div class="button" @click="buyMailman()">
              <div class="button-name">
                <div>Mailman</div>
                <div>(${{ format(mailmanPrice) }})</div>
              </div>
              <div class="button-description">
                Automate letter delivery
              </div>
              <div class="buy-max" @click="buyMax(buyMailman)">
                (buy max)
              </div>
            </div>
          </div>
          <div class="column">
            <div class="button" @click="buyMailbox()">
              <div class="button-name">
                <div>Mailbox</div>
                <div>(${{ format(mailboxPrice) }})</div>
              </div>
              <div class="button-description">
                Increase letters per second
              </div>
              <div class="buy-max" @click="buyMax(buyMailbox)">
                (buy max)
              </div> 
            </div>
          </div>
        </div>
        <div class="row" v-show="phase > 1">
          <div class="button column" @click="buyRecruiter()">
            <div class="button-name">
              <div>Recruiter</div>
              <div>(${{ format(recruiterPrice) }})</div>
            </div>
            <div class="button-description">
              Automatically hire mailmen
            </div>
            <div class="buy-max" @click="buyMax(buyRecruiter)">
              (buy max)
            </div>
          </div>
          <div class="button column" @click="buyFactory()">
            <div class="button-name">
              <div>Factory</div>
              <div>(${{ format(factoryPrice) }})</div>
            </div>
            <div class="button-description">
              Automatically build mailboxes
            </div>
            <div class="buy-max" @click="buyMax(buyFactory)">
              (buy max)
            </div>
          </div>
        </div>
        <div class="row" v-show="phase > 2">
          <div class="button column" @click="buySegway()">
            <div class="button-name">
              <div>Segway</div>
              <div>(${{ format(segwayPrice) }})</div>
            </div>
            <div class="button-description">
              Increases mailman delivery speed by 2.5% per segway
            </div>
            <div class="buy-max" @click="buyMax(buySegway)">
              (buy max)
            </div>
          </div>
        </div>
        <div class="row" v-show="phase > 2">
          <div class="button column" @click="buyScientificManagement()">
            <div class="button-name">
              <div>Scientific Management</div>
              <div v-if="!scientificManagement">(${{ format(scientificManagementBasePrice) }})</div>
              <div v-else>(owned)</div>
            </div>
            <div class="button-description">
              Cuts factory production time in half (can only be purchased once).
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
