<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script type="text/javascript" src="libs/vue.js"></script>
    <script type="module" src="js/game.js" defer></script>
    <title>More Letters</title>
  </head>
  <body>
    <div id="app" class="container">
      <div class="top-links">
        <div class="row">
          <div class="column footer-link align-right">
            <a @click="newGame()">new game</a>
          </div>
        </div>
      </div>
      <transition name="fade">
        <img v-show="phase == 1" src="assets/bgs/1.png" class="background bg1">
      </transition>
      <transition name="fade">
        <img v-show="phase == 2" src="assets/bgs/2.png" class="background bg2">
      </transition>
      <transition name="fade">
        <img v-show="phase > 2" src="assets/bgs/3.png" class="background bg3">
      </transition>
      
      <div class="row main-stat">
        ${{ format(round(money)) }}
      </div>
      
      <div class="row stats">
        <stat name="letters" :value="format(floor(letters))"></stat>
        <stat name="letters delivered" :value="format(floor(lettersDelivered))"></stat>
        <stat name="letters per second" :value="format(lettersPerSecond)"></stat>
        <stat v-show="phase >= 2" name="angry dogs" :value="format(angryDogs)"></stat> 
      </div>
      
      <div class="row stats">
        <stat v-show="phase >= 1" name="mailmen" :value="format(mailmen)"></stat>
        <stat v-show="phase >= 2" name="recruiters" :value="format(recruiters)"></stat>
        <stat v-show="phase >= 2" name="factories" :value="format(factories)"></stat>
        <stat v-show="phase >= 1" name="dog treats" :value="format(dogTreats)"></stat>
        <stat v-show="phase >= 1" name="mailboxes" :value="format(mailboxes)"></stat>
        <stat v-show="phase >= 3" name="segways" :value="format(segways)"></stat>
      </div>
      
      <div class="milestone">
        <div class="row">
          <div class="column" v-if="this.nextPhaseAvailable">
            <div class="button" @click="prestige()">
              <div class="button-name">
                Enter Phase {{ this.phase + 1 }}
              </div>
              <div class="button-description">
                This will erase all your progress and give you a 
                x{{ 2 ** (this.phase) }} multiplier.
              </div>
            </div>
          </div>
          <div v-else class="column">
            Next milestone at {{ format(this.nextPhaseAt) }} letters delivered
          </div>
        </div>
      </div>
      <div class="buttons">
        <div class="row">
          <div class="column">
            <div class="button" @click="clickDeliver">
              Deliver Letter
            </div>
          </div>
        </div>

        <div class="row">
          <buy-button 
             title="Mailman"
             @buy="buyMailman()"
             :price="format(mailmanPrice)"
             description="Mailmen deliver 1 letter per second automatically."
             :max-buy="true"
             @buy-max="buyMax(buyMailman)">
          </buy-button>
          <buy-button
             title="Mailbox"
             @buy="buyMailbox()"
             @buy-max="buyMax(buyMailbox)"
             :price="format(mailboxPrice)"
             :max-buy="true"
             description="Increases number of letters per second by 1">
          </buy-button>
        </div>

        <div class="row">
          <buy-button
             title="Bootstrap"
             @buy="buyBootstrap()"
             @buy-max="buyMax(buyBootstrap)"
             :price="format(bootstrapPrice)"
             description="Increases letters per click by 10% but reduces mailman efficiency by 5%"
             :max-buy="true">
          </buy-button>
        </div>
      </div>
    </div>
  </body>
</html>
